{% extends "dashboard.html" %}

{% block title %}Empleados{% endblock %}
{% block container_class %}justify-content-start align-items-start{% endblock %}

{% block content %}
<div class="container-fluid m-4">
    <h3 class="mb-3 d-flex justify-content-center align-items-center fw-bold">Gestión de Empleados</h3>

    <div class="table-responsive">
        <table class="table table-striped table-bordered text-center" id="tabla-empleados">
            <thead class="table-dark">
                <tr>
                    <th>ID</th>
                    <th>Nombre Completo</th>
                    <th>Número Documento</th>
                    <th>Cargo</th>
                    <th>Estado</th>
                </tr>
            </thead>
            <tbody class="text-uppercase small">
                <!-- Contenido de la API -->
            </tbody>
        </table>
    </div>
</div>

<script>
document.addEventListener("DOMContentLoaded", function () {
    fetch("/api/empleados/")
        .then(response => response.json())
        .then(data => {
            const tbody = document.querySelector("#tabla-empleados tbody");
            tbody.innerHTML = "";

            data.forEach(emp => {
                const fila = document.createElement("tr");
                fila.innerHTML = `
                    <td>${emp.id}</td>
                    <td>${emp.primer_nombre} ${emp.segundo_nombre || ""} ${emp.primer_apellido} ${emp.segundo_apellido || ""}</td>
                    <td>${emp.numero_documento}</td>
                    <td>${emp.cargo}</td>
                    <td>
                        <span class="badge ${emp.activo ? 'bg-success' : 'bg-danger'}">
                            ${emp.activo ? "Activo" : "Inactivo"}
                        </span>
                    </td>
                `;
                tbody.appendChild(fila);
            });
        })
        .catch(error => console.error("Error cargando empleados:", error));
});
</script>
{% endblock %}
